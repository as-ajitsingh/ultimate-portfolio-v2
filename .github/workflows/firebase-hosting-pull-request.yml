name: Deploy to Firebase (Production)
on:
  push:
    branches: [ master ]
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [12.x]

    steps:
    - name: Checkout
      uses: actions/checkout@v2
    - name: Yarn Install
      uses: borales/actions-yarn@v2.3.0
      with:
        cmd: install       
    - name: Build
      uses: borales/actions-yarn@v2.3.0
      with:
        cmd: build
    - name: Export
      uses: borales/actions-yarn@v2.3.0
      with:
        cmd: export
    - uses: FirebaseExtended/action-hosting-deploy@v0
      with:
        repoToken: '${{ secrets.GITHUB_TOKEN }}'
        firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_ULTIMATE_PORTFOLIO }}'
        projectId: ultimate-portfolio
        channelId: 'live'
